<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Woodman - AI Development Toolkit</title>
    <meta name="description" content="Woodman: Collection d'agents AI pour Claude Code. Agents de développement, analyseurs de stack, déploiement et gestion VPS.">
    <!-- v2.0 - Tailwind/shadcn-ui redesign -->
    <link rel="icon" href="https://raw.githubusercontent.com/izo/Woodman/main/woodman-mini.png" type="image/png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        border: "hsl(240 3.7% 15.9%)",
                        input: "hsl(240 3.7% 15.9%)",
                        ring: "hsl(142.1 76.2% 36.3%)",
                        background: "hsl(240 10% 3.9%)",
                        foreground: "hsl(0 0% 98%)",
                        primary: {
                            DEFAULT: "hsl(142.1 76.2% 36.3%)",
                            foreground: "hsl(144.9 80.4% 10%)",
                        },
                        secondary: {
                            DEFAULT: "hsl(240 3.7% 15.9%)",
                            foreground: "hsl(0 0% 98%)",
                        },
                        muted: {
                            DEFAULT: "hsl(240 3.7% 15.9%)",
                            foreground: "hsl(240 5% 64.9%)",
                        },
                        accent: {
                            DEFAULT: "hsl(240 3.7% 15.9%)",
                            foreground: "hsl(0 0% 98%)",
                        },
                        card: {
                            DEFAULT: "hsl(240 10% 3.9%)",
                            foreground: "hsl(0 0% 98%)",
                        },
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <!-- DOMPurify for XSS protection -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3/dist/purify.min.js"></script>

    <style>
        html { scroll-behavior: smooth; }
        .gradient-border {
            background: linear-gradient(to right, hsl(142.1 76.2% 36.3%), hsl(142.1 70.6% 45.3%));
            padding: 1px;
        }
        .category-violet { --category-color: rgb(139 92 246); }
        .category-blue { --category-color: rgb(59 130 246); }
        .category-orange { --category-color: rgb(249 115 22); }
        .category-green { --category-color: rgb(34 197 94); }
        .category-pink { --category-color: rgb(236 72 153); }
        .category-card:hover { border-color: var(--category-color); }
        .category-icon { background: var(--category-color); }
    </style>
</head>
<body class="bg-background text-foreground min-h-screen font-sans antialiased">

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-lg border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="#" class="flex items-center gap-3">
                    <img src="https://raw.githubusercontent.com/izo/Woodman/main/woodman.png" alt="Woodman" class="w-8 h-8 rounded-lg">
                    <span class="font-bold text-lg">Woodman</span>
                </a>
                <div class="hidden md:flex items-center gap-8">
                    <a href="#install" class="text-sm text-muted-foreground hover:text-foreground transition-colors">Installation</a>
                    <a href="#commands" class="text-sm text-muted-foreground hover:text-foreground transition-colors">Commandes</a>
                    <a href="#vps" class="text-sm text-muted-foreground hover:text-foreground transition-colors">VPS</a>
                    <a href="#workflows" class="text-sm text-muted-foreground hover:text-foreground transition-colors">Workflows</a>
                </div>
                <a href="https://github.com/izo/Woodman" target="_blank"
                   class="inline-flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors">
                    <i data-lucide="github" class="w-4 h-4"></i>
                    <span class="hidden sm:inline">GitHub</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-32 pb-20 px-4">
        <div class="max-w-4xl mx-auto text-center">
            <!-- Badge -->
            <div class="inline-flex items-center gap-2 bg-secondary border border-border rounded-full px-4 py-1.5 text-sm mb-8">
                <span class="text-primary font-semibold" id="version-badge">v1.0.0</span>
                <span class="text-muted-foreground">•</span>
                <span class="text-muted-foreground"><span id="total-commands">43</span> commandes</span>
            </div>

            <!-- Title -->
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight mb-6">
                AI Development
                <span class="text-primary">Toolkit</span>
                <br class="hidden sm:block">
                pour Claude Code
            </h1>

            <!-- Subtitle -->
            <p class="text-lg sm:text-xl text-muted-foreground max-w-2xl mx-auto mb-10">
                Collection d'agents spécialisés pour accélérer votre développement.
                Génération de specs, audits, déploiement et gestion VPS.
            </p>

            <!-- CTA Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#install"
                   class="inline-flex items-center justify-center gap-2 bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all hover:-translate-y-0.5">
                    <i data-lucide="download" class="w-5 h-5"></i>
                    Installer maintenant
                </a>
                <a href="https://github.com/izo/Woodman" target="_blank"
                   class="inline-flex items-center justify-center gap-2 bg-secondary border border-border text-foreground px-6 py-3 rounded-lg font-semibold hover:bg-accent transition-colors">
                    <i data-lucide="book-open" class="w-5 h-5"></i>
                    Documentation
                </a>
            </div>

            <!-- Stats -->
            <div class="flex flex-wrap justify-center gap-8 sm:gap-12 mt-16 pt-8 border-t border-border" id="stats-container">
                <!-- Stats injected by JS -->
            </div>
        </div>
    </section>

    <!-- Install Section -->
    <section id="install" class="py-20 px-4 bg-secondary/30">
        <div class="max-w-3xl mx-auto">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold mb-4">Installation rapide</h2>
                <p class="text-muted-foreground">Une seule commande pour installer toutes les commandes Woodman</p>
            </div>

            <div class="bg-card border border-border rounded-xl overflow-hidden">
                <div class="flex items-center justify-between px-4 py-3 bg-secondary/50 border-b border-border">
                    <div class="flex items-center gap-2 text-sm text-muted-foreground">
                        <i data-lucide="terminal" class="w-4 h-4"></i>
                        <span>Terminal</span>
                    </div>
                    <button onclick="copyInstall()" id="copy-btn"
                            class="inline-flex items-center gap-1.5 text-xs bg-secondary hover:bg-primary hover:text-primary-foreground px-3 py-1.5 rounded-md transition-colors">
                        <i data-lucide="copy" class="w-3.5 h-3.5"></i>
                        <span>Copier</span>
                    </button>
                </div>
                <div class="p-6 font-mono text-sm overflow-x-auto">
                    <div class="text-muted-foreground mb-2"># Installation globale via curl</div>
                    <div class="text-primary" id="install-command">curl -fsSL https://raw.githubusercontent.com/izo/Woodman/main/install-remote.sh | bash</div>
                </div>
            </div>

            <p class="text-center text-sm text-muted-foreground mt-6">
                Après installation, utilisez
                <code class="bg-secondary px-2 py-1 rounded text-primary font-mono">/wm:update</code>
                pour mettre à jour
            </p>
        </div>
    </section>

    <!-- Commands Section -->
    <section id="commands" class="py-20 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-4">Commandes disponibles</h2>
                <p class="text-muted-foreground">Agents spécialisés pour chaque aspect du développement</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="commands-grid">
                <!-- Commands injected by JS -->
            </div>
        </div>
    </section>

    <!-- VPS Section -->
    <section id="vps" class="py-20 px-4 bg-secondary/30">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-4">Agents VPS</h2>
                <p class="text-muted-foreground">17 agents pour gérer et configurer vos serveurs VPS multi-projets</p>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4" id="vps-grid">
                <!-- VPS commands injected by JS -->
            </div>
        </div>
    </section>

    <!-- Workflows Section -->
    <section id="workflows" class="py-20 px-4">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-4">Workflows recommandés</h2>
                <p class="text-muted-foreground">Enchaînez les commandes pour des workflows complets</p>
            </div>

            <div class="space-y-4" id="workflows-grid">
                <!-- Workflows injected by JS -->
            </div>
        </div>
    </section>

    <!-- Contribute Section -->
    <section class="py-16 px-4 bg-secondary/30 border-t border-border">
        <div class="max-w-3xl mx-auto text-center">
            <div class="inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-xl mb-6">
                <i data-lucide="git-pull-request" class="w-6 h-6 text-primary"></i>
            </div>
            <h2 class="text-2xl font-bold mb-4">Contribuer</h2>
            <p class="text-muted-foreground mb-6">
                Les commandes sont définies dans un fichier JSON contributable.
                Ajoutez vos propres agents ou améliorez les existants.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="https://github.com/izo/Woodman/blob/main/cheatheet/data/commands.json" target="_blank"
                   class="inline-flex items-center justify-center gap-2 bg-secondary border border-border px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-accent transition-colors">
                    <i data-lucide="file-json" class="w-4 h-4"></i>
                    Voir commands.json
                </a>
                <a href="https://github.com/izo/Woodman/issues/new" target="_blank"
                   class="inline-flex items-center justify-center gap-2 bg-secondary border border-border px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-accent transition-colors">
                    <i data-lucide="plus" class="w-4 h-4"></i>
                    Proposer un agent
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 px-4 border-t border-border">
        <div class="max-w-4xl mx-auto text-center">
            <div class="flex justify-center gap-6 mb-6">
                <a href="https://github.com/izo/Woodman" class="text-muted-foreground hover:text-foreground transition-colors">
                    <i data-lucide="github" class="w-5 h-5"></i>
                </a>
                <a href="https://github.com/izo/Woodman/issues" class="text-muted-foreground hover:text-foreground transition-colors">
                    <i data-lucide="message-circle" class="w-5 h-5"></i>
                </a>
            </div>
            <p class="text-sm text-muted-foreground">
                Made with
                <i data-lucide="heart" class="w-4 h-4 inline text-primary"></i>
                for
                <a href="https://claude.ai/code" class="text-primary hover:underline">Claude Code</a>
            </p>
        </div>
    </footer>

    <script>
        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.textContent;
        }

        // Safe DOM element creation
        function createElement(tag, attrs = {}, children = []) {
            const el = document.createElement(tag);
            Object.entries(attrs).forEach(([key, value]) => {
                if (key === 'className') el.className = value;
                else if (key === 'textContent') el.textContent = value;
                else el.setAttribute(key, value);
            });
            children.forEach(child => {
                if (typeof child === 'string') {
                    el.appendChild(document.createTextNode(child));
                } else {
                    el.appendChild(child);
                }
            });
            return el;
        }

        // Load and render data from JSON
        async function loadData() {
            try {
                const response = await fetch('data/commands.json');
                const data = await response.json();
                renderPage(data);
            } catch (error) {
                console.error('Error loading commands:', error);
            }
        }

        function renderPage(data) {
            // Update meta using textContent (safe)
            document.getElementById('version-badge').textContent = 'v' + escapeHtml(data.meta.version);
            document.getElementById('total-commands').textContent = escapeHtml(String(data.meta.totalCommands));
            document.getElementById('install-command').textContent = escapeHtml(data.installation.curl);

            // Render stats using DOM API
            const statsContainer = document.getElementById('stats-container');
            statsContainer.replaceChildren(); // Clear safely

            const nonVpsCategories = data.categories.filter(c => c.id !== 'vps');
            const vpsCategory = data.categories.find(c => c.id === 'vps');

            nonVpsCategories.forEach(cat => {
                const statDiv = createElement('div', { className: 'text-center' }, [
                    createElement('div', { className: 'text-3xl font-bold text-primary', textContent: String(cat.commands.length) }),
                    createElement('div', { className: 'text-sm text-muted-foreground', textContent: cat.name })
                ]);
                statsContainer.appendChild(statDiv);
            });

            if (vpsCategory) {
                const vpsStatDiv = createElement('div', { className: 'text-center' }, [
                    createElement('div', { className: 'text-3xl font-bold text-primary', textContent: String(vpsCategory.commands.length) }),
                    createElement('div', { className: 'text-sm text-muted-foreground', textContent: 'VPS' })
                ]);
                statsContainer.appendChild(vpsStatDiv);
            }

            // Render command categories using DOM API
            const commandsGrid = document.getElementById('commands-grid');
            commandsGrid.replaceChildren();

            nonVpsCategories.forEach(cat => {
                const card = createElement('div', {
                    className: `category-${escapeHtml(cat.color)} category-card bg-card border border-border rounded-xl p-6 transition-all hover:shadow-lg`
                });

                // Header
                const header = createElement('div', { className: 'flex items-center gap-4 mb-5' });
                const iconWrapper = createElement('div', { className: 'category-icon w-12 h-12 rounded-xl flex items-center justify-center' });
                const icon = createElement('i', { 'data-lucide': escapeHtml(cat.icon), className: 'w-6 h-6 text-white' });
                iconWrapper.appendChild(icon);

                const headerText = createElement('div', {}, [
                    createElement('h3', { className: 'font-semibold text-lg', textContent: cat.prefix }),
                    createElement('p', { className: 'text-sm text-muted-foreground', textContent: cat.commands.length + ' commandes' })
                ]);
                header.appendChild(iconWrapper);
                header.appendChild(headerText);
                card.appendChild(header);

                // Commands list
                const cmdList = createElement('div', { className: 'space-y-2' });
                cat.commands.forEach(cmd => {
                    const cmdItem = createElement('div', { className: 'flex items-center gap-3 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors' });
                    const cmdIcon = createElement('i', { 'data-lucide': escapeHtml(cmd.icon), className: 'w-4 h-4 text-muted-foreground flex-shrink-0' });
                    const cmdInfo = createElement('div', { className: 'min-w-0' }, [
                        createElement('span', { className: 'font-mono text-sm text-primary', textContent: cmd.name }),
                        createElement('p', { className: 'text-xs text-muted-foreground truncate', textContent: cmd.description })
                    ]);
                    cmdItem.appendChild(cmdIcon);
                    cmdItem.appendChild(cmdInfo);
                    cmdList.appendChild(cmdItem);
                });
                card.appendChild(cmdList);
                commandsGrid.appendChild(card);
            });

            // Render VPS commands using DOM API
            if (vpsCategory) {
                const vpsGrid = document.getElementById('vps-grid');
                vpsGrid.replaceChildren();

                vpsCategory.commands.forEach(cmd => {
                    const vpsCard = createElement('div', { className: 'category-pink category-card bg-card border border-border rounded-lg p-4 transition-all hover:shadow-lg' });

                    const vpsHeader = createElement('div', { className: 'flex items-center gap-3 mb-2' });
                    vpsHeader.appendChild(createElement('i', { 'data-lucide': escapeHtml(cmd.icon), className: 'w-5 h-5 text-pink-500' }));
                    vpsHeader.appendChild(createElement('span', { className: 'font-mono text-sm text-pink-500', textContent: vpsCategory.prefix + ':' + cmd.name }));

                    vpsCard.appendChild(vpsHeader);
                    vpsCard.appendChild(createElement('p', { className: 'text-sm text-muted-foreground', textContent: cmd.description }));
                    vpsGrid.appendChild(vpsCard);
                });
            }

            // Render workflows using DOM API
            const workflowsGrid = document.getElementById('workflows-grid');
            workflowsGrid.replaceChildren();

            data.workflows.forEach(wf => {
                const wfCard = createElement('div', { className: 'bg-card border border-border rounded-xl p-6' });

                // Workflow header
                const wfHeader = createElement('div', { className: 'flex items-center gap-3 mb-4' });
                const wfIconWrapper = createElement('div', { className: 'w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center' });
                wfIconWrapper.appendChild(createElement('i', { 'data-lucide': escapeHtml(wf.icon), className: 'w-5 h-5 text-primary' }));
                wfHeader.appendChild(wfIconWrapper);

                const wfInfo = createElement('div', {}, [
                    createElement('h3', { className: 'font-semibold', textContent: wf.name }),
                    createElement('p', { className: 'text-sm text-muted-foreground', textContent: wf.description })
                ]);
                wfHeader.appendChild(wfInfo);
                wfCard.appendChild(wfHeader);

                // Workflow steps
                const stepsContainer = createElement('div', { className: 'flex flex-wrap items-center gap-3' });
                wf.steps.forEach((step, i) => {
                    stepsContainer.appendChild(createElement('code', { className: 'bg-secondary px-3 py-1.5 rounded-lg font-mono text-sm text-primary', textContent: step }));
                    if (i < wf.steps.length - 1) {
                        stepsContainer.appendChild(createElement('i', { 'data-lucide': 'arrow-right', className: 'w-4 h-4 text-muted-foreground' }));
                    }
                });
                wfCard.appendChild(stepsContainer);
                workflowsGrid.appendChild(wfCard);
            });

            // Initialize Lucide icons
            lucide.createIcons();
        }

        function copyInstall() {
            const cmd = document.getElementById('install-command').textContent;
            navigator.clipboard.writeText(cmd).then(() => {
                const btn = document.getElementById('copy-btn');
                btn.replaceChildren();
                btn.appendChild(createElement('i', { 'data-lucide': 'check', className: 'w-3.5 h-3.5' }));
                btn.appendChild(createElement('span', { textContent: 'Copié!' }));
                lucide.createIcons();
                setTimeout(() => {
                    btn.replaceChildren();
                    btn.appendChild(createElement('i', { 'data-lucide': 'copy', className: 'w-3.5 h-3.5' }));
                    btn.appendChild(createElement('span', { textContent: 'Copier' }));
                    lucide.createIcons();
                }, 2000);
            });
        }

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Load data on page load
        loadData();
    </script>
</body>
</html>
